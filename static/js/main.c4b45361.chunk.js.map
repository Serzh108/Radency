{"version":3,"sources":["components/ErrorBlock/ErrorBlock.module.css","components/Table/Table.module.css","components/ErrorBlock/ErrorBlock.js","components/Table/Table.js","helpers/validateArr.js","helpers/validateData.js","components/Page/Page.js","App.js","index.js","components/Page/Page.module.css"],"names":["module","exports","ErrorBlock","className","styles","errorBlock","Table","state","length","map","item","idx","data","el","index","myErrors","wrongData","trim","duplicate","STATETOSHORT","alabama","michigan","nevada","california","Florida","emptyCell","a","SyntaxError","validateAr","rowArr","newAr","slice","indexOf","toLowerCase","elArr","split","forEach","arr","join","CurrentDate","Date","test","validateData","setCriticalError","subAr","error","console","log","message","lessIndex","currentPhone","duplicatePhoneIndex","currentEmail","duplicateEmailIndex","i","comparedEmail","buttonRef","React","createRef","Page","useState","setState","criticalError","handleOpenDialog","e","current","open","ref","onFileLoad","onError","err","file","inputElem","reason","noClick","noDrag","onRemoveFile","aside","type","onClick","btn","fileName","name","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c4b45361.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"errorBlock\":\"ErrorBlock_errorBlock__3c0Ti\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrongData\":\"Table_wrongData__nYIID\"};","import React from 'react';\nimport styles from './ErrorBlock.module.css';\n\nfunction ErrorBlock() {\n  return (\n    <div className={styles.errorBlock}>\n      <h2>File format is not correct</h2>\n    </div>\n  );\n}\n\nexport default ErrorBlock;\n","import React from 'react';\nimport styles from './Table.module.css';\n\nconst tableHead = () => {\n  return (\n    <tr>\n      <th>ID</th>\n      <th>Full Name</th>\n      <th>Phone</th>\n      <th>Email</th>\n      <th>Age</th>\n      <th>Experience</th>\n      <th>Yearly Income</th>\n      <th>Has children</th>\n      <th>License states</th>\n      <th>Expiration date</th>\n      <th>License number</th>\n      <th>Duplicate with</th>\n    </tr>\n  );\n};\n\nfunction Table({ state }) {\n  return (\n    <table>\n      <tbody>\n        {tableHead()}\n        {state.length > 0 &&\n          state.map(\n            (item, idx) =>\n              item.data.length > 1 && (\n                <tr key={idx}>\n                  <td>{idx + 1}</td>\n                  {item.data.map((el, index) => (\n                    <td\n                      key={index}\n                      className={\n                        !item.myErrors[index] ? styles.wrongData : null\n                      }\n                    >\n                      {el.trim()}\n                      {/* {' ' + item.myErrors[index]} */}\n                    </td>\n                  ))}\n                  <td>{item.duplicate && item.duplicate}</td>\n                </tr>\n              ),\n          )}\n      </tbody>\n    </table>\n  );\n}\n\nexport default Table;\n","const STATETOSHORT = {\n  alabama: 'AL',\n  michigan: 'MI',\n  nevada: 'NV',\n  california: 'CA',\n  Florida: 'FL',\n};\n\nconst emptyCell = a => {\n  if (a.length === 0) {\n    throw new SyntaxError('Missing critical data!');\n  }\n};\n\n// Full Name\nconst firstColumn = el => {\n  // console.log('firstColumn = ', el);\n  emptyCell(el);\n};\n\n// Phone\nconst secondColumn = (el, index, rowArr) => {\n  emptyCell(el);\n  if (el.length > 12 || el.length < 10) {\n    return true;\n  }\n  if (el.length === 12 && (el[0] !== '+' || el[1] !== '1')) {\n    return true;\n  }\n  if (el.length === 11 && el[0] === '1') {\n    rowArr[index] = '+' + el;\n  }\n  if (el.length === 10) {\n    rowArr[index] = '+1' + el;\n  }\n};\n\n// Email\nconst thirdColumn = (el, index, rowArr, newAr) => {\n  emptyCell(el);\n};\n\n// Age\nconst fourthColumn = el => {\n  if (el % 1 !== 0) {\n    return true;\n  }\n  if (+el < 21) {\n    return true;\n  }\n};\n\n// Experience\nconst fifthColumn = (el, index, rowArr) => {\n  if (+el > rowArr[index - 1] - 21 || +el < 0) {\n    return true;\n  }\n};\n\n// Yearly Income\nconst sixthColumn = el => {\n  if (el % 1 !== 0) {\n    if (el.slice(el.indexOf('.') + 1).length !== 2) {\n      return true;\n    }\n  }\n  if (+el > 1000000 || +el < 0) {\n    return true;\n  }\n};\n\n// Has children\nconst seventhColumn = (el, index, rowArr) => {\n  if (\n    el.toLowerCase() !== 'true' &&\n    el.toLowerCase() !== 'false' &&\n    el !== ''\n  ) {\n    return true;\n  }\n};\n\n// License states\nconst eighthColumn = (el, index, rowArr) => {\n  const elArr = el.split(',');\n\n  if (elArr.length === 1 && el.length > 2) {\n    rowArr[index] = STATETOSHORT[el.toLowerCase()];\n  }\n\n  if (elArr.length > 1) {\n    elArr.forEach((item, idx, arr) => {\n      if (item.trim().length > 2) {\n        arr[idx] = STATETOSHORT[item.toLowerCase().trim()];\n      } else {\n        arr[idx] = item.trim();\n      }\n    });\n    rowArr[index] = elArr.join('|');\n  }\n};\n\n// Expiration date\nconst ninthColumn = el => {\n  const CurrentDate = new Date();\n  const ourDate = new Date(el);\n  if (ourDate < CurrentDate) {\n    return true;\n  }\n\n  if (!/\\d{4}-\\d{2}-\\d{2}/.test(el) && !/\\d{2}\\/\\d{2}\\/\\d{4}/.test(el)) {\n    return true;\n  }\n};\n\n// License number\nconst tenthColumn = (el, index, rowArr) => {\n  if (el.length !== 6 || /\\W|_/.test(el)) {\n    return true;\n  }\n};\n\nconst validateAr = [\n  firstColumn,\n  secondColumn,\n  thirdColumn,\n  fourthColumn,\n  fifthColumn,\n  sixthColumn,\n  seventhColumn,\n  eighthColumn,\n  ninthColumn,\n  tenthColumn,\n];\n\nexport default validateAr;\n","import validateAr from './validateArr';\n\nconst validateData = (data, setCriticalError) => {\n  // console.log('validateData', data[0].data);\n  data &&\n    data.forEach((item, idx, newAr) => {\n      const subAr =\n        item.data.length > 1\n          ? item.data.map((el, index, rowArr) => {\n              // console.log(`el- ${idx}-${index} : `, el);\n              try {\n                if (validateAr[index](el, index, rowArr, newAr)) return false;\n              } catch (error) {\n                console.log('error', error.message);\n                setCriticalError(true);\n              }\n              // return el.length > 64 ? false : true;\n              return true;\n            })\n          : [];\n      newAr[idx].myErrors = subAr;\n    });\n  // ---------- validate Phone & Email ------------\n  data &&\n    data.forEach((item, idx, newAr) => {\n      // console.log(` --- item idx: ${idx}, Phone: ${item.data[1]}, Email: ${item.data[2]}`);\n      const currentPhone = item.data[1];\n      let duplicatePhoneIndex = -1;\n      const currentEmail = item.data[2] && item.data[2].toLowerCase();\n      let duplicateEmailIndex = -1;\n      newAr.forEach((arr, i) => {\n        if (currentPhone === arr.data[1] && i !== idx) {\n          duplicatePhoneIndex =\n            duplicatePhoneIndex !== -1 ? duplicatePhoneIndex : i + 1;\n        }\n\n        const comparedEmail = arr.data[2] && arr.data[2].toLowerCase();\n        if (currentEmail === comparedEmail && i !== idx) {\n          duplicateEmailIndex =\n            duplicateEmailIndex !== -1 ? duplicateEmailIndex : i + 1;\n        }\n      });\n      let lessIndex;\n      if (duplicatePhoneIndex !== -1 && duplicateEmailIndex !== -1) {\n        if (duplicatePhoneIndex < duplicateEmailIndex) {\n          lessIndex = duplicatePhoneIndex;\n          newAr[idx].myErrors[1] = false;\n        } else {\n          lessIndex = duplicateEmailIndex;\n          newAr[idx].myErrors[2] = false;\n        }\n      }\n      if (duplicatePhoneIndex !== -1 && duplicateEmailIndex === -1) {\n        lessIndex = duplicatePhoneIndex;\n        newAr[idx].myErrors[1] = false;\n      }\n      if (duplicatePhoneIndex === -1 && duplicateEmailIndex !== -1) {\n        lessIndex = duplicateEmailIndex;\n        newAr[idx].myErrors[2] = false;\n      }\n\n      newAr[idx].duplicate = lessIndex;\n    });\n  // ----------------------\n};\n\nexport default validateData;\n","import React, { useState } from 'react';\nimport { CSVReader } from 'react-papaparse';\nimport ErrorBlock from '../ErrorBlock/ErrorBlock';\nimport Table from '../Table/Table';\nimport validateData from '../../helpers/validateData';\nimport styles from './Page.module.css';\n\nconst buttonRef = React.createRef();\n\nfunction Page() {\n  const [state, setState] = useState([]);\n  const [criticalError, setCriticalError] = useState(false);\n\n  const handleOpenDialog = e => {\n    // Note that the ref is set async, so it might be null at some point\n    if (buttonRef.current) {\n      buttonRef.current.open(e);\n    }\n  };\n\n  const handleOnFileLoad = data => {\n    // console.log('---------------------------');\n    // console.log(data);\n    // console.log('---------------------------');\n    setCriticalError(false);\n    validateData(data, setCriticalError);\n    setState(data);\n  };\n\n  const handleOnError = (err, file, inputElem, reason) => {\n    console.log('---------------------------');\n    console.log(err);\n    console.log('---------------------------');\n  };\n\n  const handleOnRemoveFile = data => {\n    console.log('---------------------------');\n    console.log(data);\n    console.log('---------------------------');\n  };\n\n  return (\n    <>\n      <CSVReader\n        ref={buttonRef}\n        onFileLoad={handleOnFileLoad}\n        onError={handleOnError}\n        noClick\n        noDrag\n        onRemoveFile={handleOnRemoveFile}\n      >\n        {({ file }) => (\n          <aside className={styles.aside}>\n            <button\n              type=\"button\"\n              onClick={handleOpenDialog}\n              className={styles.btn}\n            >\n              Import users\n            </button>\n            <div className={styles.fileName}>{file && file.name}</div>\n          </aside>\n        )}\n      </CSVReader>\n      {criticalError ? <ErrorBlock /> : <Table state={state} />}\n    </>\n  );\n}\n\nexport default Page;\n","import React from 'react';\nimport Page from './components/Page/Page';\nimport './styles/App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <p>Radency - test task.</p>\n      </header>\n      <Page />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aside\":\"Page_aside__3TBL7\",\"btn\":\"Page_btn__1Zfk-\",\"fileName\":\"Page_fileName__1PV_U\"};"],"sourceRoot":""}